%!TEX root = manual.tex
%
\chapter{Usage}
\label{chap:usage}

\section*{Synopsis}
\begin{quote}
  \texttt{asdlgen \textit{command} [ \textit{options} ] \textit{files} ...}
\end{quote}%
%
Where \texttt{\textit{command}} is one of
\begin{quote}
  \begin{tabular}{ll}
    \texttt{help}
      & Print information about the \asdlgen{} tool to the standard output. \\
    \texttt{version}
      & Print the version of of asdlgen to the standard output. \\
    \texttt{c++} or \texttt{cxx}
      & Generate \Cplusplus{} \\
    \texttt{sml}
      & Generate Standard ML \\
% NOT YET IMPLEMENTED!!!
%    \texttt{typ}
%      & Generate a machine readable type description of the ASDL modules \\
    \texttt{check}
      & Check correctness of inputs, but do not generate output \\
  \end{tabular}%
\end{quote}%

\section*{Description}
\asdlgen{} reads the set of \texttt{\textit{files}}, which contain ASDL module
and view declarations.

\section*{Common Options}

Options common to all the commands include
\begin{description}
  \item[\normalfont\texttt{-n}] \mbox{}\\
    Do not write any output files.
    Instead write the list of files that would have been written to standard out.
% NOT YET IMPLEMENTED!!!
%  \item[\normalfont\texttt{--line-width=}\textit{width}] \mbox{}\\
%    Set the maximum line width for pretty printing code.
%    The default value is 90 characters.
  \item[\normalfont\texttt{--output-directory=}\textit{dir} or \texttt{-d} \textit{dir}] \mbox{}\\
    Specify the output directory to place the generated files.
    By default the output will be placed in the same directory as the
    input file from which it was produced.
  \item[\normalfont\texttt{--pickler=}\textit{name} or \texttt{-p} \textit{name}] \mbox{}\\
    Specifies which kind of pickler to generate.
    See \chapref{chap:pickles} for details.
\end{description}%

\section*{Command-specific Options}

All the commands that produce source code as output offer a different
command option to select the default base environment.
The base environment is the set of the initial definitions available to the code.
It defines the set of primitive types and functions used by the generated code.
For example using the option \texttt{--base-include=my-base.h}
when generating C code will insert the directive
\begin{quote}\begin{lstlisting}[language=c]
#include "my-base.h"
\end{lstlisting}\end{quote}%
in the appropriate place so the resulting code will use the definitions found in
\texttt{my-base.h} rather than the default set of primitive types.
Unless there is a need to globally redefine
the primitive types changing the base environment should be avoided.
The actual option names vary depending on the output language.

See \chapref{chap:code-interface} for a more detailed description about the interfaces
to the default set of primitive types and functions.

\subsection*{Options for \Cplusplus}

\begin{description}
  \item[\normalfont\texttt{--base-include=}\textit{file}] \mbox{}\\
    Specify the name of the \Cplusplus{}header file that defines the primitive \asdl{} types
    and functions.
    The default value is \texttt{asdl/asdl.hxx}.
\end{description}%

% NOT YET IMPLEMENTED!!!
%\subsection*{Options for Standard ML}
%\begin{description}
%  \item[\normalfont\texttt{--base-structure=}\textit{structure-name}] \mbox{}\\
%    Specify the name of the structure that defines the primitive ASDL types.
%    The default value is \lstinline[language=SML]!ASDL!.
%\end{description}%

